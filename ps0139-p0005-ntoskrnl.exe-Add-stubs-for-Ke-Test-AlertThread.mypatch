From: Derek Lesho <dlesho@codeweavers.com>
Subject: [PATCH v2 5/5] ntoskrnl.exe: Add stubs for Ke(/Test)AlertThread.
Message-Id: <20200716151711.101295-5-dlesho@codeweavers.com>
Date: Thu, 16 Jul 2020 10:17:11 -0500
In-Reply-To: <20200716151711.101295-1-dlesho@codeweavers.com>
References: <20200716151711.101295-1-dlesho@codeweavers.com>

Signed-off-by: Derek Lesho <dlesho@codeweavers.com>
---
v2: Fixed function definition.
---
 dlls/ntoskrnl.exe/ntoskrnl.exe.spec |  2 ++
 dlls/ntoskrnl.exe/sync.c            | 18 ++++++++++++++++++
 2 files changed, 20 insertions(+)

diff --git a/dlls/ntoskrnl.exe/ntoskrnl.exe.spec b/dlls/ntoskrnl.exe/ntoskrnl.exe.spec
index 37ac3effad3..d3f9bbdd862 100644
--- a/dlls/ntoskrnl.exe/ntoskrnl.exe.spec
+++ b/dlls/ntoskrnl.exe/ntoskrnl.exe.spec
@@ -529,6 +529,7 @@
 @ stdcall KeAcquireSpinLockAtDpcLevel(ptr)
 @ stdcall -arch=!i386 KeAcquireSpinLockRaiseToDpc(ptr)
 @ stub KeAddSystemServiceTable
+@ stdcall KeAlertThread(ptr long)
 @ stdcall KeAreApcsDisabled()
 @ stub KeAttachProcess
 @ stdcall KeBugCheck(long)
@@ -647,6 +648,7 @@
 @ stdcall KeStackAttachProcess(ptr ptr)
 @ stub KeSynchronizeExecution
 @ stub KeTerminateThread
+@ stdcall KeTestAlertThread(long)
 @ extern KeTickCount
 @ stdcall KeUnstackDetachProcess(ptr)
 @ stub KeUpdateRunTime
diff --git a/dlls/ntoskrnl.exe/sync.c b/dlls/ntoskrnl.exe/sync.c
index c67c4f01573..0ddb1b353c5 100644
--- a/dlls/ntoskrnl.exe/sync.c
+++ b/dlls/ntoskrnl.exe/sync.c
@@ -696,6 +696,24 @@ void WINAPI KeInitializeApc(PRKAPC apc, PRKTHREAD thread, KAPC_ENVIRONMENT env,
     }
 }
 
+/***********************************************************************
+ *           KeTestAlertThread  (NTOSKRNL.EXE.@)
+ */
+BOOLEAN WINAPI KeTestAlertThread(KPROCESSOR_MODE mode)
+{
+    FIXME("stub! %u\n", mode);
+    return TRUE;
+}
+
+/***********************************************************************
+ *           KeAlertThread  (NTOSKRNL.EXE.@)
+ */
+BOOLEAN WINAPI KeAlertThread(PKTHREAD thread, KPROCESSOR_MODE mode)
+{
+    FIXME("stub! %p mode %u\n", thread, mode);
+    return TRUE;
+}
+
 static KSPIN_LOCK cancel_lock;
 
 /***********************************************************************

-- 
2.27.0

